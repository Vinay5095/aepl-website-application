ACT AS: Principal Enterprise Architect & Senior Full-Stack EngineerGOAL: Architect a Unified Industrial Business Operations Platform (ERP)STACK: Next.js (App Router), TypeScript, Supabase, shadcn/ui, DockerYou are an expert Enterprise SaaS Architect, Senior TypeScript Engineer, Next.js + shadcn/ui specialist, and Supabase/Postgres + Docker expert.üî• Build a single unified business operations platform for an industrial supply company that includes:Public WebsiteB2B eCommerce + RFQCRM + SalesPurchase & Supplier ManagementWarehouse & InventoryQuality (QC/QMS)Logistics & Shipment ManagementManagement/CEO dashboardsMarketing automationFull Accounting (India-compliant: GST, TDS, e-Invoice, e-Way Bill, AR/AP, Ledger, Bank Reconciliation, Fixed Assets)Full HRMS + Payroll (India-compliant: PF, ESI, TDS, PT, LWF, Form 16, ECR/Challan, attendance, onboarding, exits)Stack:Frontend: Next.js (App Router), TypeScript, shadcn/ui, Tailwind, React Hook Form + ZodBackend: Supabase (Postgres, Auth, Storage, Functions, RLS), Edge FunctionsDeployment: Docker, Docker ComposeArchitecture: Multi-role, multi-department, multi-operation, modular but unified monolith1) üéØ APPLICATION OVERVIEWCreate a true end-to-end ERP-like platform specifically optimized for industrial supply operations, including:Public website for product browsingQuote-based eCommerce (not direct buy only; RFQ first)Deep product catalog with technical specs and document managementEnd-to-end operational modules (Sales ‚Üí Purchase ‚Üí Inventory ‚Üí QC ‚Üí Logistics ‚Üí Accounting ‚Üí HRMS)A single data model where all departments share the same truthAudit trails, workflows, approvals, analytics, dashboardsHeavy India statutory complianceThis must be enterprise-grade, scalable, modular, secure, and production-ready.2) üë• USER ROLES & PERMISSIONSImplement RBAC using Supabase Auth + RLS.External RolesPublic visitorB2B customer (company + multiple employees/logins)Supplier (external vendor portal access)Internal RolesSales ExecutiveSales ManagerPurchase ExecutiveProcurement ManagerInventory/Warehouse StaffQC InspectorQC ManagerLogistics ExecutiveFinance/AccountingHR ExecutivePayroll AdminCEO/DirectorSuper AdminEach module must have role-by-role visibility, actions, and restrictions.3) üì¶ PRODUCT CATALOG (Industrial Supply Focus)Support extremely detailed product data:ID, Name, SKU, Brand, ModelRich descriptions + long HTMLCategorization (main, sub-category, tags)Multi-attribute technical specification templatePackaging & UOMInventory details (MOQ, increment, stock visibility rules)Tiered pricing + customer-specific pricingTax data (HSN, GST %, cess)Attachments stored in Supabase Storage:TDS, MSDS, COA, COC, Test Certificates, Compliance DocsVisibility:Public / private / customer-specificRegion-wise restrictionsProduct structure must be extensible: dynamic attributes per category.4) üõí B2B eCommerce + RFQ MODULERFQ WorkflowCustomer browses product and adds items to RFQ cartCustomer submits RFQ with quantities, delivery needs, instructionsSales receives RFQ ‚Üí assigns to sales repSales builds quote:Price per lineDiscount rulesDelivery termsValidityCustomer reviews quote:Accept quoteRejectRequest revisionConvert accepted quote ‚Üí Sales OrderInventory reservedTrigger purchase if insufficient stockRFQ must support:Document attachments from customerMulti-round negotiation historyFull activity timelineAudit logs5) üöÄ SALES MODULELeads, Contacts, Accounts (CRM mini-module)Opportunity pipeline (Kanban)Quote builderSales OrdersDispatch/Delivery trackingSales performance dashboardCustom pricing rulesCommission rulesCustomer statements & historySales integration:With Product CatalogWith Inventory (for availability and reservation)With Accounting (auto-created Sales Invoice + GL entries)6) üõç PURCHASE MODULEPR ‚Üí PO ‚Üí GRN ‚Üí Supplier BillPurchase Requisition (automatic from low-stock, RFQ demand, manual)Purchase Order builderPO approval workflow (multi-level)Supplier portal for PO acknowledgmentGoods Received Note (GRN) linked to inventorySupplier Invoice matching (3-way match: PO vs GRN vs Invoice)Supplier management:Documents (GST, PAN, compliance)Ratings (OTD performance, quality score)Purchase integration:Inventory valuationAccounts PayableQC ModuleLogistics (incoming shipments)7) üè¨ WAREHOUSE & INVENTORY MODULEIndustrial-grade warehouse operations:Multi-warehouseBin locationsLot & Serial trackingStock Moves:InboundOutboundTransferAdjustmentsPicking ‚Üí Packing ‚Üí Dispatch workflowCycle counting & stock auditsStock valuation (FIFO, Weighted Avg)Safety stock & reorder recommendationsReserved stock vs free stockScannable barcodes/QR for products, bins, lotsInventory integration:Sales ‚Üí reserve stockPurchase ‚Üí GRN increase stockQC ‚Üí block/unblock stockAccounting ‚Üí valuation entries8) üß™ QUALITY (QC/QMS) MODULEIndustrial QC coverage:QC on inbound (after GRN)QC on in-process (optional)QC on outbound (before dispatch)QC templates: parameters, tests, limitsQC results captureNon-Conformance Reports (NCR)CAPA workflowBatch/lot-wise COA generationLink QC results to product and supplier performanceQuality integration:Blocks inventory until QC is passedSupplier scorecardCustomer-facing COAs9) üöö LOGISTICS MODULEShipment creationCarrier selection (manual or connected API)Freight rate captureAWB/BL document storageTracking updatesDelivery confirmation (POD upload)Freight costing ‚Üí landed cost calculationE-way bill metadata fieldsExport shipment documentsLogistics integration:Sales dispatchPurchase inboundAccounts (freight charges booking)10) üéØ MANAGEMENT (CEO/DIRECTOR)High-level dashboards for entire business:Company performance KPIsSales funnel & forecastProcurement spend analysisInventory value, aging, working capitalCashflow summaryProfitabilityQuality metrics, NCR rateLogistics on-time delivery %HR/Payroll cost & attrition11) üìà MARKETING MODULECampaign builderEmail/SMS campaignsLead capture automationProduct promotionsBlog/Content ManagementProduct analytics (page views, conversions)Integration with Sales leads12) üìò FULL ACCOUNTING MODULE (INDIA-COMPLIANT)A complete ERP-grade accounting system:Core FeaturesChart of AccountsJournal entriesSales invoices (GST compliant)Purchase bills (Input GST)Debit/Credit notesAR & APAgeing reportsBank accounts + reconciliationMulti-currencyFinancial periods & year-end closeGST support:CGST/SGST/IGSTHSN-based ratesGSTR1 / GSTR3B data exportE-invoice JSON generationE-way bill fieldsTDS/TCS on:VendorsEmployees (salary)Fixed Assets:Asset registerDepreciationSale, write-offAutomatic Accounting EntriesSystem must automatically post:Sales invoicesPurchase billsGRN accrualsPayments & receiptsPayroll entriesInventory valuation & COGSDepreciation13) üë®‚Äçüíº FULL HRMS + PAYROLL MODULE (INDIA-COMPLIANT)Employee MasterPAN, Aadhaar, UAN, ESIC NoDepartment, DesignationWork locationCTC, Salary breakupBank detailsDocumentsAttendance & LeaveBiometric integration (CSV/API)Multiple shiftsLeave typesManager ‚Üí HR workflowPayroll EngineMust support:EarningsBasic, HRA, DA, Special AllowancesOvertimeBonusIncentivesReimbursementsDeductions (Statutory + Voluntary)PF (EPF/EPS)ESIProfessional Tax (state-wise)TDS computation under Section 192Labour Welfare Fund (state-wise)Salary advancesLoansDeductions as per Indian lawsCompliance OutputTDS challan reportForm 16 generationPF ECR fileESIC monthly challanPT summaryLWF summaryPayslipsPDF generationEmployee portal for downloadEmployee Life CycleHiringKYC uploadConfirmationPromotionResignation/TerminationFull & Final SettlementLeave encashmentGratuityRecoveries14) üóÑ DATABASE DESIGN REQUIREMENTSBuild a fully normalized Postgres schema including:Products & attributesRFQs, Quotes, OrdersSales & CRMPurchase, PR, PO, GRNInventory, stock moves, lotsQC records, NCR, CAPAShipmentsAccounting:Chart of accountsJournalsInvoices & billsPaymentsTax tablesFixed assetsHR & Payroll tablesDocuments & storage mappingsSettings per companyActivity logs (immutable)15) üîê RLS SECURITY (MANDATORY)Implement strict Supabase RLS:Customers see only their dataSuppliers see only their POsEmployees see only relevant modulesFinance sees financial moduleHR sees employee salariesCEO sees everythingRLS must be role-driven and audit every change.16) üìÅ FILE STORAGEUse Supabase Storage for:Product PDFsQC reportsShipment docs (AWB, BL)Invoices & billsHR documents (KYC, payslips, offer letters, resignations)All downloads must be permission controlled.17) üèó FRONTEND STRUCTURE (NEXT.JS APP ROUTER)app/
(public)/
(auth)/
(customer)/
(supplier)/
(dashboard)/
sales/
purchase/
inventory/
quality/
logistics/
accounting/
hr/
marketing/
management/
admin/
Use shadcn/ui for components:Tables, Cards, Dialogs, Forms, Stepper, Tabs, Charts, DataTables, Toasts, Drawer, Command Menu, Skeleton Loaders, Themes, Role-based navigation.18) üê≥ DOCKER DEPLOYMENTProvide:Multi-stage Dockerfiledocker-compose.yml with:nextjs_appsupabase (if self-hosted)worker (optional for background jobs)Production environment variablesHealth checksLogging strategy19) üîÑ INTEGRATIONSGovernment (e-invoice, e-way bill, PF/ESI payload exports)SMS/email providersBiometric attendance (CSV/API)Payment gateways (Razorpay/UPI)Accounting exports (Tally/QuickBooks/Xero)Courier APIs (optional)20) üìä REPORTING & BIMust deliver reports for:SalesPurchaseInventoryQCLogisticsAccounting (TB, P&L, BS, Cashflow)HR & PayrollManagement dashboards with KPIsConsider embedding Metabase or building native dashboards.21) üéØ WHAT I EXPECT AS OUTPUTProduce a complete system blueprint, including:High-level architecture diagram (text OK)Full database schema (all tables, fields, relations)RLS policy design per moduleAPI design (Next.js server components or Edge Functions)UI layout structure for all modulesAutomated workflows (purchase ‚Üí inventory ‚Üí qc ‚Üí accounting ‚Üí logistics)Accounting entry mapping for all transactionsPayroll calculation logic (India-compliant)Dockerfile + docker-compose exampleImplementation plan + MVP vs Phase 2 vs Phase 3 roadmapThis should be enterprise-grade and scalable.
